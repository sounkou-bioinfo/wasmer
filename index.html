<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>WebAssembly Runtime for R using Wasmer • wasmer</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="WebAssembly Runtime for R using Wasmer">
<meta name="description" content="R bindings for the Wasmer &lt;https://github.com/wasmerio/wasmer/&gt; WebAssembly runtime. This package allows you to compile, instantiate, and execute WebAssembly modules from R, providing a bridge between R and WebAssembly for high-performance computing and interoperability.">
<meta property="og:description" content="R bindings for the Wasmer &lt;https://github.com/wasmerio/wasmer/&gt; WebAssembly runtime. This package allows you to compile, instantiate, and execute WebAssembly modules from R, providing a bridge between R and WebAssembly for high-performance computing and interoperability.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">wasmer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="wasmer-webassembly-runtime-for-r">wasmer: WebAssembly Runtime for R<a class="anchor" aria-label="anchor" href="#wasmer-webassembly-runtime-for-r"></a>
</h1></div>
<!-- badges: start -->

<p>The <code>wasmer</code> package provides R bindings for the <code>rust</code> based <a href="https://github.com/wasmerio/wasmer" class="external-link">Wasmer</a> WebAssembly runtime, allowing you to compile, instantiate, and execute WebAssembly modules directly from R. This opens up possibilities for high-performance computing, cross-language interoperability, and running untrusted code in a sandboxed environment. This is a wip and may be dropped for a pure C runtime.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>This package uses <a href="https://github.com/extendr/rextendr" class="external-link">{rextendr}</a>, so you will need a Rust installation</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"sounkou-bioinfo/wasmer"</span><span class="op">)</span></span>
<span><span class="va">or</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"wasmer"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://sounkou-bioinfo.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="initialize-the-runtime-with-specified-compiler">Initialize the Runtime with specified compiler<a class="anchor" aria-label="anchor" href="#initialize-the-runtime-with-specified-compiler"></a>
</h3>
<p>You can choose the compiler backend when initializing the runtime. Each compiler offers different trade-offs:</p>
<ul>
<li>
<strong>Cranelift</strong> (default): Fast compilation with good runtime performance</li>
<li>
<strong>Singlepass</strong>: Fastest compilation (linear time), ideal for blockchains/gas metering</li>
<li>
<strong>LLVM</strong> (optional): Best runtime performance (~50% faster than Cranelift), but requires LLVM 18 installed</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sounkou-bioinfo.github.io/wasmer/">wasmer</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the Wasmer runtime (must be called first)</span></span>
<span><span class="va">runtime</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_runtime_new.html">wasmer_runtime_new</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">runtime</span></span>
<span><span class="co">#&gt; &lt;pointer: 0x5cbbfa8aa300&gt;</span></span>
<span><span class="co"># can release ressources before the gc and the external pointer release</span></span>
<span><span class="co"># mechamism</span></span>
<span><span class="fu"><a href="reference/wasmer_runtime_release_ressources.html">wasmer_runtime_release_ressources</a></span><span class="op">(</span><span class="va">runtime</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">runtime</span><span class="op">)</span></span>
<span><span class="co"># Initialize with Cranelift (default)</span></span>
<span><span class="va">runtime</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_runtime_new_with_compiler_ext.html">wasmer_runtime_new_with_compiler_ext</a></span><span class="op">(</span><span class="st">"cranelift"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">runtime</span><span class="op">)</span></span>
<span><span class="co"># Initialize with Singlepass for fastest compilation</span></span>
<span><span class="va">runtime</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_runtime_new_with_compiler_ext.html">wasmer_runtime_new_with_compiler_ext</a></span><span class="op">(</span><span class="st">"singlepass"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">runtime</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;           used (Mb) gc trigger (Mb) max used (Mb)</span></span>
<span><span class="co">#&gt; Ncells  519188 27.8    1125155 60.1   716477 38.3</span></span>
<span><span class="co">#&gt; Vcells 1083011  8.3    8388608 64.0  2005466 15.4</span></span>
<span><span class="co"># LLVM is available only if package was built with LLVM support</span></span>
<span><span class="co"># (requires LLVM 18 on system)</span></span>
<span><span class="co">#runtime &lt;- wasmer_runtime_new_with_compiler_ext("llvm")</span></span>
<span><span class="co"># to continue with the toor, we create a runtime that will be re-using</span></span>
<span><span class="co"># only one runtime per process is recommended</span></span>
<span><span class="va">runtime</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_runtime_new.html">wasmer_runtime_new</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">runtime</span></span>
<span><span class="co">#&gt; &lt;pointer: 0x5cbbfa762930&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="compiler-selection">Compiler Selection<a class="anchor" aria-label="anchor" href="#compiler-selection"></a>
</h3>
</div>
<div class="section level3">
<h3 id="math-operations-compiled-from-rust">Math Operations compiled from Rust<a class="anchor" aria-label="anchor" href="#math-operations-compiled-from-rust"></a>
</h3>
<p>This is to test basic host functionality using functions in rust.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test basic math operations</span></span>
<span><span class="va">math_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_math_example_ext.html">wasmer_math_example_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="fl">5L</span>, <span class="fl">3L</span><span class="op">)</span></span>
<span><span class="va">math_result</span></span>
<span><span class="co">#&gt; $add</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $multiply</span></span>
<span><span class="co">#&gt; [1] 15</span></span>
<span></span>
<span><span class="co"># Verify the results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">math_result</span><span class="op">$</span><span class="va">add</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">math_result</span><span class="op">$</span><span class="va">multiply</span> <span class="op">==</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="custom-webassembly-modules">Custom WebAssembly Modules<a class="anchor" aria-label="anchor" href="#custom-webassembly-modules"></a>
</h3>
<p>Basic module tests</p>
<div class="section level4">
<h4 id="fibonaci">Fibonaci<a class="anchor" aria-label="anchor" href="#fibonaci"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define a Fibonacci function in WebAssembly Text Format</span></span>
<span><span class="va">fibonacci_wat</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">(module</span></span>
<span><span class="st">  (func $fibonacci (export "fibonacci") (param $n i32) (result i32)</span></span>
<span><span class="st">    (if (i32.le_s (local.get $n) (i32.const 1))</span></span>
<span><span class="st">      (then (return (local.get $n)))</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">    (return (i32.add </span></span>
<span><span class="st">      (call $fibonacci (i32.sub (local.get $n) (i32.const 1)))</span></span>
<span><span class="st">      (call $fibonacci (i32.sub (local.get $n) (i32.const 2)))</span></span>
<span><span class="st">    ))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">)</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="co"># Compile the WebAssembly module</span></span>
<span><span class="va">compile_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_compile_wat_ext.html">wasmer_compile_wat_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">fibonacci_wat</span>, <span class="st">"fibonacci_module"</span><span class="op">)</span></span>
<span><span class="va">compile_result</span></span>
<span><span class="co">#&gt; [1] "Module 'fibonacci_module' compiled successfully"</span></span>
<span></span>
<span><span class="co"># Create an instance of the module</span></span>
<span><span class="va">instance_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_instantiate_ext.html">wasmer_instantiate_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"fibonacci_module"</span>, <span class="st">"fib_instance"</span><span class="op">)</span></span>
<span><span class="va">instance_result</span></span>
<span><span class="co">#&gt; [1] "Instance 'fib_instance' created successfully"</span></span>
<span><span class="co"># List available exports</span></span>
<span><span class="va">exports</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_list_exports_ext.html">wasmer_list_exports_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"fib_instance"</span><span class="op">)</span></span>
<span><span class="va">exports</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $exports</span></span>
<span><span class="co">#&gt; [1] "fibonacci"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">exports</span><span class="op">$</span><span class="va">success</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="st">"fibonacci"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">exports</span><span class="op">$</span><span class="va">exports</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Native R fibonacci implementations</span></span>
<span><span class="co"># Naive recursive (grows stack)</span></span>
<span><span class="va">fib_r</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">n</span> <span class="op">&lt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">fib_r</span><span class="op">(</span><span class="va">n</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="fu">fib_r</span><span class="op">(</span><span class="va">n</span><span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Tail-recursive using Tailcall </span></span>
<span><span class="va">fib_tailcall</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">fib_iter</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, <span class="va">count</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">count</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">a</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>      <span class="co"># Force evaluation to avoid deferred computations</span></span>
<span>      <span class="va">new_a</span> <span class="op">&lt;-</span> <span class="va">b</span></span>
<span>      <span class="va">new_b</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/Tailcall.html" class="external-link">Tailcall</a></span><span class="op">(</span><span class="va">fib_iter</span>, <span class="va">new_a</span>, <span class="va">new_b</span>, <span class="va">count</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">fib_iter</span><span class="op">(</span><span class="fl">0L</span>, <span class="fl">1L</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Benchmark all three implementations</span></span>
<span><span class="va">n_test</span> <span class="op">&lt;-</span> <span class="fl">20L</span></span>
<span></span>
<span><span class="va">bench_results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  wasm <span class="op">=</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"fib_instance"</span>, <span class="st">"fibonacci"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">n_test</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  r_naive <span class="op">=</span> <span class="fu">fib_r</span><span class="op">(</span><span class="va">n_test</span><span class="op">)</span>,</span>
<span>  r_tailcall <span class="op">=</span> <span class="fu">fib_tailcall</span><span class="op">(</span><span class="va">n_test</span><span class="op">)</span>,</span>
<span>  check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">bench_results</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 6</span></span>
<span><span class="co">#&gt;   expression      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 wasm         26.1µs   27.4µs    36500.    2.61KB     3.65</span></span>
<span><span class="co">#&gt; 2 r_naive       3.4ms   3.44ms      290.   32.66KB    69.3 </span></span>
<span><span class="co">#&gt; 3 r_tailcall   10.6µs  11.44µs    84671.        0B    67.8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">bench_results</span><span class="op">$</span><span class="va">wasm</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">bench_results</span><span class="op">$</span><span class="va">r_naive</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">bench_results</span><span class="op">$</span><span class="va">r_naive</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">bench_results</span><span class="op">$</span><span class="va">r_tailcall</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="calculate-fibonacci-numbers">Calculate Fibonacci Numbers<a class="anchor" aria-label="anchor" href="#calculate-fibonacci-numbers"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test fibonacci calculations with smaller numbers due to recursive implementation</span></span>
<span><span class="va">fibonacci_tests</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">8</span>,</span>
<span>  expected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">13</span>, <span class="fl">21</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fibonacci_tests</span><span class="op">$</span><span class="va">calculated</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">fibonacci_tests</span><span class="op">$</span><span class="va">n</span>, <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"fib_instance"</span>, <span class="st">"fibonacci"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">success</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fibonacci_tests</span></span>
<span><span class="co">#&gt;   n expected calculated</span></span>
<span><span class="co">#&gt; 1 0        0          0</span></span>
<span><span class="co">#&gt; 2 1        1          1</span></span>
<span><span class="co">#&gt; 3 2        1          1</span></span>
<span><span class="co">#&gt; 4 3        2          2</span></span>
<span><span class="co">#&gt; 5 4        3          3</span></span>
<span><span class="co">#&gt; 6 5        5          5</span></span>
<span><span class="co">#&gt; 7 6        8          8</span></span>
<span><span class="co">#&gt; 8 7       13         13</span></span>
<span><span class="co">#&gt; 9 8       21         21</span></span>
<span></span>
<span><span class="co"># Verify all calculations are correct</span></span>
<span><span class="va">all_correct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">fibonacci_tests</span><span class="op">$</span><span class="va">calculated</span> <span class="op">==</span> <span class="va">fibonacci_tests</span><span class="op">$</span><span class="va">expected</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">all_correct</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="prime-number-checker">Prime Number Checker<a class="anchor" aria-label="anchor" href="#prime-number-checker"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define a prime number checker in WebAssembly</span></span>
<span><span class="va">prime_wat</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">(module</span></span>
<span><span class="st">  (func $is_prime (export "is_prime") (param $n i32) (result i32)</span></span>
<span><span class="st">    (local $i i32)</span></span>
<span><span class="st">    (local $sqrt_n i32)</span></span>
<span><span class="st">    </span></span>
<span><span class="st">    ;; Handle special cases</span></span>
<span><span class="st">    (if (i32.lt_s (local.get $n) (i32.const 2))</span></span>
<span><span class="st">      (then (return (i32.const 0))) ;; Not prime</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">    </span></span>
<span><span class="st">    (if (i32.eq (local.get $n) (i32.const 2))</span></span>
<span><span class="st">      (then (return (i32.const 1))) ;; 2 is prime</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">    </span></span>
<span><span class="st">    ;; Check if even</span></span>
<span><span class="st">    (if (i32.eqz (i32.rem_u (local.get $n) (i32.const 2)))</span></span>
<span><span class="st">      (then (return (i32.const 0))) ;; Even numbers &gt; 2 are not prime</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">    </span></span>
<span><span class="st">    ;; Check odd divisors up to sqrt(n)</span></span>
<span><span class="st">    (local.set $i (i32.const 3))</span></span>
<span><span class="st">    (local.set $sqrt_n (local.get $n)) ;; Approximate sqrt</span></span>
<span><span class="st">    </span></span>
<span><span class="st">    (loop $check_loop</span></span>
<span><span class="st">      (if (i32.gt_s (i32.mul (local.get $i) (local.get $i)) (local.get $n))</span></span>
<span><span class="st">        (then (return (i32.const 1))) ;; Prime</span></span>
<span><span class="st">      )</span></span>
<span><span class="st">      </span></span>
<span><span class="st">      (if (i32.eqz (i32.rem_u (local.get $n) (local.get $i)))</span></span>
<span><span class="st">        (then (return (i32.const 0))) ;; Not prime</span></span>
<span><span class="st">      )</span></span>
<span><span class="st">      </span></span>
<span><span class="st">      (local.set $i (i32.add (local.get $i) (i32.const 2)))</span></span>
<span><span class="st">      (br $check_loop)</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">    </span></span>
<span><span class="st">    (i32.const 1) ;; Should not reach here, but return prime</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">)</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="co"># Compile and instantiate the prime checker</span></span>
<span><span class="fu"><a href="reference/wasmer_compile_wat_ext.html">wasmer_compile_wat_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">prime_wat</span>, <span class="st">"prime_module"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Module 'prime_module' compiled successfully"</span></span>
<span><span class="fu"><a href="reference/wasmer_instantiate_ext.html">wasmer_instantiate_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"prime_module"</span>, <span class="st">"prime_instance"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Instance 'prime_instance' created successfully"</span></span>
<span></span>
<span><span class="co"># Test with known primes and non-primes</span></span>
<span><span class="va">test_numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">13</span>, <span class="fl">15</span>, <span class="fl">17</span>, <span class="fl">19</span>, <span class="fl">21</span>, <span class="fl">23</span>, <span class="fl">25</span>, <span class="fl">29</span>, <span class="fl">31</span><span class="op">)</span></span>
<span><span class="va">expected_primes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">11</span>, <span class="fl">13</span>, <span class="fl">17</span>, <span class="fl">19</span>, <span class="fl">23</span>, <span class="fl">29</span>, <span class="fl">31</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">test_numbers</span>, <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"prime_instance"</span>, <span class="st">"is_prime"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prime_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  number <span class="op">=</span> <span class="va">test_numbers</span>,</span>
<span>  is_prime <span class="op">=</span> <span class="va">results</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>  expected <span class="op">=</span> <span class="va">test_numbers</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">expected_primes</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">prime_results</span></span>
<span><span class="co">#&gt;    number is_prime expected</span></span>
<span><span class="co">#&gt; 1       2     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 2       3     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 3       4    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 4       5     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 5       6    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 6       7     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 7       8    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 8       9    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 9      10    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 10     11     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 11     13     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 12     15    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 13     17     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 14     19     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 15     21    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 16     23     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 17     25    FALSE    FALSE</span></span>
<span><span class="co">#&gt; 18     29     TRUE     TRUE</span></span>
<span><span class="co">#&gt; 19     31     TRUE     TRUE</span></span>
<span></span>
<span><span class="co"># Verify all results are correct</span></span>
<span><span class="va">all_prime_correct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">prime_results</span><span class="op">$</span><span class="va">is_prime</span> <span class="op">==</span> <span class="va">prime_results</span><span class="op">$</span><span class="va">expected</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">all_prime_correct</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="inspect-exported-function-signatures">Inspect Exported Function Signatures<a class="anchor" aria-label="anchor" href="#inspect-exported-function-signatures"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># After instantiating a module, you can inspect its exported function signatures</span></span>
<span><span class="va">signatures</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_list_function_signatures_ext.html">wasmer_list_function_signatures_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"fib_instance"</span><span class="op">)</span></span>
<span><span class="va">signatures</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "fibonacci"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $params</span></span>
<span><span class="co">#&gt; [1] "[I32]"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $results</span></span>
<span><span class="co">#&gt; [1] "[I32]"</span></span>
<span></span>
<span><span class="co"># You can also inspect other instances</span></span>
<span><span class="va">signatures_prime</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_list_function_signatures_ext.html">wasmer_list_function_signatures_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"prime_instance"</span><span class="op">)</span></span>
<span><span class="va">signatures_prime</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "is_prime"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $params</span></span>
<span><span class="co">#&gt; [1] "[I32]"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $results</span></span>
<span><span class="co">#&gt; [1] "[I32]"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="wat-to-wasm-binary-conversion-and-binary-module-loading">WAT to WASM Binary Conversion and Binary Module Loading<a class="anchor" aria-label="anchor" href="#wat-to-wasm-binary-conversion-and-binary-module-loading"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert WAT to WASM binary</span></span>
<span><span class="va">wat_code</span> <span class="op">&lt;-</span> <span class="st">' (module (func $double (export "double") (param $x i32) (result i32) local.get $x i32.const 2 i32.mul) ) '</span></span>
<span><span class="va">wasm_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_wat_to_wasm_ext.html">wasmer_wat_to_wasm_ext</a></span><span class="op">(</span><span class="va">wat_code</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/raw.html" class="external-link">is.raw</a></span><span class="op">(</span><span class="va">wasm_bin</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">wasm_bin</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compile the binary WASM into a module</span></span>
<span><span class="va">compile_bin_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_compile_wasm_ext.html">wasmer_compile_wasm_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">wasm_bin</span>, <span class="st">"double_module_bin"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">is.character</a></span><span class="op">(</span><span class="va">compile_bin_result</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"compiled from binary successfully"</span>, <span class="va">compile_bin_result</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Instantiate and call the exported function</span></span>
<span><span class="va">instance_bin_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_instantiate_ext.html">wasmer_instantiate_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"double_module_bin"</span>, <span class="st">"double_instance_bin"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">is.character</a></span><span class="op">(</span><span class="va">instance_bin_result</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"created successfully"</span>, <span class="va">instance_bin_result</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Call the function</span></span>
<span><span class="va">result_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"double_instance_bin"</span>, <span class="st">"double"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">21L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">result_bin</span><span class="op">$</span><span class="va">success</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">result_bin</span><span class="op">$</span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">result_bin</span><span class="op">$</span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 42</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="register-and-call-an-r-function-from-wasm">Register and Call an R Function from WASM<a class="anchor" aria-label="anchor" href="#register-and-call-an-r-function-from-wasm"></a>
</h2>
<p>This interface is very limited, refer to the function tables example.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co">## Corrected Example: Register and Call an R Function from WASM</span></span>
<span></span>
<span><span class="co"># Define an R function to double a value</span></span>
<span><span class="va">r_double</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fl">2L</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">handle</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_register_r_function_ext.html">wasmer_register_r_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"r_double"</span>, <span class="va">r_double</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The Rust host function expects (handle, args_ptr, argc), but only the args are passed to R</span></span>
<span><span class="va">wat_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">'</span></span>
<span><span class="st">(module</span></span>
<span><span class="st">  (import "env" "r_host_call" (func $r_host_call (param i32 i32 i32) (result i32)))</span></span>
<span><span class="st">  (memory (export "memory") 1)</span></span>
<span><span class="st">  (data (i32.const 0) "r_double")</span></span>
<span><span class="st">  (func $call_r_double (export "call_r_double") (param $x i32) (result i32)</span></span>
<span><span class="st">    (i32.store (i32.const 100) (local.get $x))</span></span>
<span><span class="st">    (call $r_host_call (i32.const %d) (i32.const 100) (i32.const 1))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">)</span></span>
<span><span class="st">'</span>, <span class="va">handle</span><span class="op">)</span></span>
<span></span>
<span><span class="va">compile_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_compile_wat_ext.html">wasmer_compile_wat_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">wat_code</span>, <span class="st">"rhost_module"</span><span class="op">)</span></span>
<span><span class="va">compile_result</span></span>
<span><span class="co">#&gt; [1] "Module 'rhost_module' compiled successfully"</span></span>
<span><span class="va">instance_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_instantiate_ext.html">wasmer_instantiate_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"rhost_module"</span>, <span class="st">"rhost_instance"</span><span class="op">)</span></span>
<span><span class="va">instance_result</span></span>
<span><span class="co">#&gt; [1] "Instance 'rhost_instance' created successfully"</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"rhost_instance"</span>, <span class="st">"call_r_double"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">21L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [wasmer] Host call: handle=1, args=[21]</span></span>
<span><span class="co">#&gt; [wasmer] Found R function for handle 1, calling...</span></span>
<span><span class="co">#&gt; [wasmer] R call result: 42</span></span>
<span><span class="co">#&gt; [wasmer] Returning integer value: 42</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 42</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">42</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="wasm-memory">WASM Memory<a class="anchor" aria-label="anchor" href="#wasm-memory"></a>
</h2>
<div class="section level3">
<h3 id="simple-wasm-memory-example">Simple WASM Memory Example<a class="anchor" aria-label="anchor" href="#simple-wasm-memory-example"></a>
</h3>
<p>This example shows how to write and read bytes and strings from WASM memory using Wasmer’s R interface.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compile a simple WAT module with exported memory</span></span>
<span><span class="va">wat</span> <span class="op">&lt;-</span> <span class="st">'(module (memory (export "memory") 1) (func (export "write") (param i32 i32) (result i32)</span></span>
<span><span class="st">  local.get 0</span></span>
<span><span class="st">  local.get 1</span></span>
<span><span class="st">  i32.store</span></span>
<span><span class="st">  local.get 0))'</span></span>
<span><span class="fu"><a href="reference/wasmer_compile_wat_ext.html">wasmer_compile_wat_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">wat</span>, <span class="st">"memmod"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Module 'memmod' compiled successfully"</span></span>
<span><span class="fu"><a href="reference/wasmer_instantiate_ext.html">wasmer_instantiate_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"memmod"</span>, <span class="st">"inst"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Instance 'inst' created successfully"</span></span>
<span></span>
<span><span class="co"># Write bytes to memory</span></span>
<span><span class="fu"><a href="reference/wasmer_memory_write_ext.html">wasmer_memory_write_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"inst"</span>, <span class="st">"memory"</span>, <span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/raw.html" class="external-link">as.raw</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">66</span>, <span class="fl">67</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Write 'A', 'B', 'C' at offset 0</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># Read bytes from memory</span></span>
<span><span class="va">bytes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_memory_read_ext.html">wasmer_memory_read_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"inst"</span>, <span class="st">"memory"</span>, <span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">bytes</span> <span class="co"># Should print raw vector: 41 42 43</span></span>
<span><span class="co">#&gt; [1] 41 42 43</span></span>
<span></span>
<span><span class="co"># Grow memory by 1 page (64KiB)</span></span>
<span><span class="va">success</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_memory_grow_ext.html">wasmer_memory_grow_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"inst"</span>, <span class="st">"memory"</span>, <span class="fl">1L</span><span class="op">)</span></span>
<span><span class="va">success</span> <span class="co"># Should print TRUE if memory was grown</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># Read as string</span></span>
<span><span class="va">str</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_memory_read_string_ext.html">wasmer_memory_read_string_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"inst"</span>, <span class="st">"memory"</span>, <span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">str</span> <span class="co"># Should print "ABC"</span></span>
<span><span class="co">#&gt; [1] "ABC"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="write-r-array-sum-in-wasm">Write R Array, Sum in WASM<a class="anchor" aria-label="anchor" href="#write-r-array-sum-in-wasm"></a>
</h3>
<p>This example demonstrates passing a numeric array from R to WASM memory, summing it in WASM, and reading the result back.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># WASM module that sums an array of f64 values in memory</span></span>
<span><span class="va">wat_sum_array</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">(module</span></span>
<span><span class="st">  (memory (export "memory") 1)</span></span>
<span><span class="st">  (func $sum_array (export "sum_array") (param $offset i32) (param $len i32) (result f64)</span></span>
<span><span class="st">    (local $i i32)</span></span>
<span><span class="st">    (local $sum f64)</span></span>
<span><span class="st">    (local.set $i (i32.const 0))</span></span>
<span><span class="st">    (local.set $sum (f64.const 0))</span></span>
<span><span class="st">    (block $break</span></span>
<span><span class="st">      (loop $loop</span></span>
<span><span class="st">        (br_if $break (i32.ge_u (local.get $i) (local.get $len)))</span></span>
<span><span class="st">        ;; Load f64 from memory: memory is byte-addressed, f64 is 8 bytes</span></span>
<span><span class="st">        (local.set $sum</span></span>
<span><span class="st">          (f64.add</span></span>
<span><span class="st">            (local.get $sum)</span></span>
<span><span class="st">            (f64.load (i32.add (local.get $offset) (i32.mul (local.get $i) (i32.const 8))))</span></span>
<span><span class="st">          )</span></span>
<span><span class="st">        )</span></span>
<span><span class="st">        (local.set $i (i32.add (local.get $i) (i32.const 1)))</span></span>
<span><span class="st">        (br $loop)</span></span>
<span><span class="st">      )</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">    (local.get $sum)</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">)</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="co"># Compile and instantiate</span></span>
<span><span class="fu"><a href="reference/wasmer_compile_wat_ext.html">wasmer_compile_wat_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">wat_sum_array</span>, <span class="st">"sum_mod"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Module 'sum_mod' compiled successfully"</span></span>
<span><span class="fu"><a href="reference/wasmer_instantiate_ext.html">wasmer_instantiate_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"sum_mod"</span>, <span class="st">"sum_inst"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Instance 'sum_inst' created successfully"</span></span>
<span></span>
<span><span class="co"># Generate R array and write to WASM memory</span></span>
<span><span class="va">arr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">offset</span> <span class="op">&lt;-</span> <span class="fl">0L</span>  <span class="co"># start of memory</span></span>
<span><span class="va">raw_bytes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">writeBin</a></span><span class="op">(</span><span class="va">arr</span>, <span class="fu"><a href="https://rdrr.io/r/base/raw.html" class="external-link">raw</a></span><span class="op">(</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">8</span><span class="op">)</span>  <span class="co"># f64 is 8 bytes</span></span>
<span><span class="fu"><a href="reference/wasmer_memory_write_ext.html">wasmer_memory_write_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"sum_inst"</span>, <span class="st">"memory"</span>, <span class="va">offset</span>, <span class="va">raw_bytes</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># Call WASM sum_array(offset, length)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"sum_inst"</span>, <span class="st">"sum_array"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">offset</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">arr</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] -4.829397</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">arr</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -4.829397</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">arr</span><span class="op">)</span> <span class="op">-</span> <span class="va">result</span><span class="op">$</span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">1e-8</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="wasm-tables-and-typed-host-functions">WASM Tables and Typed Host Functions<a class="anchor" aria-label="anchor" href="#wasm-tables-and-typed-host-functions"></a>
</h2>
<p>This example demonstrates using typed host functions that can be inserted into WASM tables.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create runtime</span></span>
<span><span class="va">rt</span> <span class="op">&lt;-</span> <span class="va">runtime</span></span>
<span></span>
<span><span class="co"># Example 1: (i32, i32) -&gt; i32 - Binary operations</span></span>
<span><span class="va">host_add</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="va">host_multiply</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span> <span class="op">*</span> <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="va">add_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_i32_i32_to_i32.html">wasmer_function_new_i32_i32_to_i32</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_add</span><span class="op">)</span></span>
<span><span class="va">mul_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_i32_i32_to_i32.html">wasmer_function_new_i32_i32_to_i32</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_multiply</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create and use in WASM table</span></span>
<span><span class="va">table_ptr</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_table_new_ext.html">wasmer_table_new_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="fl">2L</span>, <span class="fl">10L</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">0L</span>, <span class="va">add_func</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">1L</span>, <span class="va">mul_func</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># Example 2: (i32) -&gt; i32 - Unary integer operations</span></span>
<span><span class="va">host_square</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span> <span class="op">*</span> <span class="va">x</span><span class="op">)</span></span>
<span><span class="va">host_double</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">x</span> <span class="op">*</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">square_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_i32_to_i32.html">wasmer_function_new_i32_to_i32</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_square</span><span class="op">)</span></span>
<span><span class="va">double_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_i32_to_i32.html">wasmer_function_new_i32_to_i32</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_double</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 3: (f64, f64) -&gt; f64 - Binary float operations  </span></span>
<span><span class="va">host_avg</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="va">host_max</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="va">avg_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_f64_f64_to_f64.html">wasmer_function_new_f64_f64_to_f64</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_avg</span><span class="op">)</span></span>
<span><span class="va">max_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_f64_f64_to_f64.html">wasmer_function_new_f64_f64_to_f64</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_max</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 4: (f64) -&gt; f64 - Unary float operations</span></span>
<span><span class="va">host_sqrt</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">host_abs</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sqrt_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_f64_to_f64.html">wasmer_function_new_f64_to_f64</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_sqrt</span><span class="op">)</span></span>
<span><span class="va">abs_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_f64_to_f64.html">wasmer_function_new_f64_to_f64</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_abs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 5: (i32) -&gt; void - Side effects (logging/printing)</span></span>
<span><span class="va">logged_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">host_log</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">logged_values</span> <span class="op">&lt;&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">logged_values</span>, <span class="va">x</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">log_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_i32_to_void.html">wasmer_function_new_i32_to_void</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_log</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 6: () -&gt; i32 - Generators/timestamps</span></span>
<span><span class="va">counter</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">host_next_id</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">counter</span> <span class="op">&lt;&lt;-</span> <span class="va">counter</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">counter</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">next_id_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_void_to_i32.html">wasmer_function_new_void_to_i32</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_next_id</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now create simple WASM modules that actually CALL these host functions!</span></span>
<span><span class="co">## Example: Call Host Function from WASM Table</span></span>
<span></span>
<span></span>
<span><span class="co"># Reuse the same runtime used above</span></span>
<span><span class="co"># Host function: next_id generator</span></span>
<span><span class="va">counter</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">host_next_id</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">counter</span> <span class="op">&lt;&lt;-</span> <span class="va">counter</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">counter</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">next_id_func</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_function_new_void_to_i32.html">wasmer_function_new_void_to_i32</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">host_next_id</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create WASM table and set host function</span></span>
<span></span>
<span><span class="co"># Create WASM table with 4 slots and set host functions</span></span>
<span></span>
<span><span class="co"># Create WASM table with 5 slots and set host functions</span></span>
<span></span>
<span><span class="co"># Create WASM table with 9 slots and set host functions</span></span>
<span><span class="va">table_ptr</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_table_new_ext.html">wasmer_table_new_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="fl">9L</span>, <span class="fl">9L</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">0L</span>, <span class="va">next_id_func</span><span class="op">)</span>   <span class="co"># slot 0: next_id</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">1L</span>, <span class="va">add_func</span><span class="op">)</span>       <span class="co"># slot 1: add</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">2L</span>, <span class="va">square_func</span><span class="op">)</span>    <span class="co"># slot 2: square</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">3L</span>, <span class="va">mul_func</span><span class="op">)</span>       <span class="co"># slot 3: multiply</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">4L</span>, <span class="va">double_func</span><span class="op">)</span>    <span class="co"># slot 4: double</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">5L</span>, <span class="va">avg_func</span><span class="op">)</span>       <span class="co"># slot 5: avg (f64, f64) -&gt; f64</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">6L</span>, <span class="va">max_func</span><span class="op">)</span>       <span class="co"># slot 6: max (f64, f64) -&gt; f64</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">7L</span>, <span class="va">sqrt_func</span><span class="op">)</span>      <span class="co"># slot 7: sqrt (f64) -&gt; f64</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/wasmer_table_set_ext.html">wasmer_table_set_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">table_ptr</span>, <span class="fl">8L</span>, <span class="va">abs_func</span><span class="op">)</span>       <span class="co"># slot 8: abs (f64) -&gt; f64</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># WASM module that imports and uses a table</span></span>
<span><span class="va">wat_table_call</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">(module</span></span>
<span><span class="st">  ;; Types for each host function signature</span></span>
<span><span class="st">  (type $gen (func (result i32)))</span></span>
<span><span class="st">  (type $binop (func (param i32 i32) (result i32)))</span></span>
<span><span class="st">  (type $unop (func (param i32) (result i32)))</span></span>
<span><span class="st">  (type $binopf64 (func (param f64 f64) (result f64)))</span></span>
<span><span class="st">  (type $unopf64 (func (param f64) (result f64)))</span></span>
<span><span class="st"></span></span>
<span><span class="st">  ;; Import a table with 9 funcref slots</span></span>
<span><span class="st">  (import "env" "host_table" (table 9 funcref))</span></span>
<span><span class="st"></span></span>
<span><span class="st">  ;; Call next_id (slot 0)</span></span>
<span><span class="st">  (func $call_next_id (export "call_next_id") (result i32)</span></span>
<span><span class="st">    (call_indirect (type $gen) (i32.const 0))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call add (slot 1)</span></span>
<span><span class="st">  (func $call_add (export "call_add") (param $x i32) (param $y i32) (result i32)</span></span>
<span><span class="st">    (call_indirect (type $binop) (local.get $x) (local.get $y) (i32.const 1))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call square (slot 2)</span></span>
<span><span class="st">  (func $call_square (export "call_square") (param $x i32) (result i32)</span></span>
<span><span class="st">    (call_indirect (type $unop) (local.get $x) (i32.const 2))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call multiply (slot 3)</span></span>
<span><span class="st">  (func $call_multiply (export "call_multiply") (param $x i32) (param $y i32) (result i32)</span></span>
<span><span class="st">    (call_indirect (type $binop) (local.get $x) (local.get $y) (i32.const 3))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call double (slot 4)</span></span>
<span><span class="st">  (func $call_double (export "call_double") (param $x i32) (result i32)</span></span>
<span><span class="st">    (call_indirect (type $unop) (local.get $x) (i32.const 4))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call avg (slot 5)</span></span>
<span><span class="st">  (func $call_avg (export "call_avg") (param $x f64) (param $y f64) (result f64)</span></span>
<span><span class="st">    (call_indirect (type $binopf64) (local.get $x) (local.get $y) (i32.const 5))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call max (slot 6)</span></span>
<span><span class="st">  (func $call_max (export "call_max") (param $x f64) (param $y f64) (result f64)</span></span>
<span><span class="st">    (call_indirect (type $binopf64) (local.get $x) (local.get $y) (i32.const 6))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call sqrt (slot 7)</span></span>
<span><span class="st">  (func $call_sqrt (export "call_sqrt") (param $x f64) (result f64)</span></span>
<span><span class="st">    (call_indirect (type $unopf64) (local.get $x) (i32.const 7))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">  ;; Call abs (slot 8)</span></span>
<span><span class="st">  (func $call_abs (export "call_abs") (param $x f64) (result f64)</span></span>
<span><span class="st">    (call_indirect (type $unopf64) (local.get $x) (i32.const 8))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">)</span></span>
<span><span class="st">'</span></span>
<span></span>
<span><span class="co"># Compile the module</span></span>
<span><span class="fu"><a href="reference/wasmer_compile_wat_ext.html">wasmer_compile_wat_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="va">wat_table_call</span>, <span class="st">"table_module"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Module 'table_module' compiled successfully"</span></span>
<span></span>
<span><span class="co"># Instantiate the module, passing the table as an import</span></span>
<span><span class="fu"><a href="reference/wasmer_instantiate_with_table_ext.html">wasmer_instantiate_with_table_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_module"</span>, <span class="st">"table_instance"</span>, <span class="va">table_ptr</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Instance 'table_instance' created successfully with table import"</span></span>
<span></span>
<span><span class="co"># Call the WASM function, which calls the host function via the table</span></span>
<span></span>
<span><span class="co"># Call each WASM function, which calls the corresponding host function via the table</span></span>
<span><span class="va">result_next_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_next_id"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_next_id</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span></span>
<span><span class="va">result_add</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_add"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">10L</span>, <span class="fl">32L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_add</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 42</span></span>
<span></span>
<span><span class="va">result_square</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_square"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">7L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_square</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 49</span></span>
<span></span>
<span><span class="va">result_multiply</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_multiply"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">6L</span>, <span class="fl">7L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_multiply</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 42</span></span>
<span></span>
<span><span class="va">result_double</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_double"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">21L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_double</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 42</span></span>
<span></span>
<span><span class="va">result_avg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_avg"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_avg</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span></span>
<span><span class="va">result_max</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_max"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_max</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 2.5</span></span>
<span></span>
<span><span class="va">result_sqrt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_sqrt"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">9.0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_sqrt</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="va">result_sqrt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_sqrt"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">9.115</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_sqrt</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 3.019106</span></span>
<span><span class="va">result_abs</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">runtime</span>, <span class="st">"table_instance"</span>, <span class="st">"call_abs"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">-</span><span class="fl">42.0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result_abs</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; [1] 42</span></span></code></pre></div>
<div class="section level3">
<h3 id="available-typed-host-function-signatures">Available Typed Host Function Signatures<a class="anchor" aria-label="anchor" href="#available-typed-host-function-signatures"></a>
</h3>
<p>The package provides the following typed host function creators:</p>
<ul>
<li>
<code>wasmer_function_new_i32_to_i32(runtime, rfun)</code> - (i32) -&gt; i32</li>
<li>
<code>wasmer_function_new_i32_i32_to_i32(runtime, rfun)</code> - (i32, i32) -&gt; i32<br>
</li>
<li>
<code>wasmer_function_new_f64_f64_to_f64(runtime, rfun)</code> - (f64, f64) -&gt; f64</li>
<li>
<code>wasmer_function_new_f64_to_f64(runtime, rfun)</code> - (f64) -&gt; f64</li>
<li>
<code>wasmer_function_new_i32_to_void(runtime, rfun)</code> - (i32) -&gt; void (for logging)</li>
<li>
<code>wasmer_function_new_void_to_i32(runtime, rfun)</code> - () -&gt; i32 (for generators)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="wasix">WASI(X)<a class="anchor" aria-label="anchor" href="#wasix"></a>
</h2>
<p>The package supports WASIX (WebAssembly System Interface Extension), allowing WASM modules to interact with system resources and files in a sandboxed way.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a WASIX-enabled runtime</span></span>
<span><span class="va">rt_wasix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_runtime_new.html">wasmer_runtime_new</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a temp directory and file in R</span></span>
<span><span class="va">output_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">output_dir</span>, <span class="st">"wasix_output.txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="va">output_file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="va">file_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">output_file</span><span class="op">)</span></span>
<span><span class="va">file_data</span> <span class="op">&lt;-</span> <span class="st">"Hello from WASIX file"</span></span>
<span></span>
<span><span class="co"># Create WASIX environment </span></span>
<span><span class="fu"><a href="reference/wasmer_wasi_state_new_ext.html">wasmer_wasi_state_new_ext</a></span><span class="op">(</span><span class="va">rt_wasix</span>, <span class="st">"hello_wasix"</span>, <span class="st">"wasix"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># WASIX WAT: open file and write to it using path_open and fd_write</span></span>
<span><span class="va">escape_wat_string</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">'([\\"])'</span>, <span class="st">'\\\\1'</span>, <span class="va">x</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">file_wasix_wat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">'</span></span>
<span><span class="st">(module</span></span>
<span><span class="st">  (import "wasix_32v1" "path_open"</span></span>
<span><span class="st">    (func $path_open (param i32 i32 i32 i32 i32 i64 i64 i32 i32) (result i32)))</span></span>
<span><span class="st">  (import "wasix_32v1" "fd_write"</span></span>
<span><span class="st">    (func $fd_write (param i32 i32 i32 i32) (result i32)))</span></span>
<span><span class="st">  (memory (export "memory") 1)</span></span>
<span><span class="st">  (data (i32.const 0) "%s")</span></span>
<span><span class="st">  (data (i32.const 100) "%s")</span></span>
<span><span class="st">  (func $_start (export "_start")</span></span>
<span><span class="st">    (local $fd i32)</span></span>
<span><span class="st">    ;; Open the file in the preopened dir (fd=3)</span></span>
<span><span class="st">    (i32.store (i32.const 200) (i32.const 0))   ;; pointer to filename</span></span>
<span><span class="st">    (i32.store (i32.const 204) (i32.const %d))  ;; length of filename</span></span>
<span><span class="st">    (drop (call $path_open</span></span>
<span><span class="st">      (i32.const 3)   ;; preopened dir fd</span></span>
<span><span class="st">      (i32.const 0)   ;; dirflags</span></span>
<span><span class="st">      (i32.const 0)   ;; path_ptr</span></span>
<span><span class="st">      (i32.const %d)  ;; path_len</span></span>
<span><span class="st">      (i32.const 1)   ;; oflags (create)</span></span>
<span><span class="st">      (i64.const 0x0000000000000002) ;; rights_base (RIGHT_FD_WRITE)</span></span>
<span><span class="st">      (i64.const 0x0000000000000000) ;; rights_inheriting</span></span>
<span><span class="st">      (i32.const 0)   ;; fdflags</span></span>
<span><span class="st">      (i32.const 208) ;; fd_out_ptr</span></span>
<span><span class="st">    ))</span></span>
<span><span class="st">    ;; fd is now at memory[208]</span></span>
<span><span class="st">    (local.set $fd (i32.load (i32.const 208)))</span></span>
<span><span class="st">    ;; Prepare iovec for writing</span></span>
<span><span class="st">    (i32.store (i32.const 300) (i32.const 100)) ;; ptr to string</span></span>
<span><span class="st">    (i32.store (i32.const 304) (i32.const %d))  ;; length</span></span>
<span><span class="st">    ;; Write to file</span></span>
<span><span class="st">    (drop (call $fd_write</span></span>
<span><span class="st">      (local.get $fd)</span></span>
<span><span class="st">      (i32.const 300)</span></span>
<span><span class="st">      (i32.const 1)</span></span>
<span><span class="st">      (i32.const 400)</span></span>
<span><span class="st">    ))</span></span>
<span><span class="st">  )</span></span>
<span><span class="st">)</span></span>
<span><span class="st">'</span>, <span class="fu">escape_wat_string</span><span class="op">(</span><span class="va">file_name</span><span class="op">)</span>, <span class="fu">escape_wat_string</span><span class="op">(</span><span class="va">file_data</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">file_name</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">file_name</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">file_data</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compile and instantiate the module</span></span>
<span><span class="fu"><a href="reference/wasmer_compile_wat_ext.html">wasmer_compile_wat_ext</a></span><span class="op">(</span><span class="va">rt_wasix</span>, <span class="va">file_wasix_wat</span>, <span class="st">"hello_wasix"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Module 'hello_wasix' compiled successfully"</span></span>
<span><span class="fu"><a href="reference/wasmer_instantiate_ext.html">wasmer_instantiate_ext</a></span><span class="op">(</span><span class="va">rt_wasix</span>, <span class="st">"hello_wasix"</span>, <span class="st">"file_instance"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Instance 'file_instance' created successfully"</span></span>
<span></span>
<span><span class="co"># Call the WASIX _start function (writes to file)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wasmer_call_function_ext.html">wasmer_call_function_ext</a></span><span class="op">(</span><span class="va">rt_wasix</span>, <span class="st">"file_instance"</span>, <span class="st">"_start"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt; $success</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $values</span></span>
<span><span class="co">#&gt; list()</span></span>
<span></span>
<span><span class="co"># Read the output file in R</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">output_file</span><span class="op">)</span></span>
<span><span class="co">#&gt; character(0)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pending-issues">Pending issues<a class="anchor" aria-label="anchor" href="#pending-issues"></a>
</h2>
<ul class="task-list">
<li><p><label><input type="checkbox">WASI exploration</label></p></li>
<li><p><label><input type="checkbox">Compiler and engine interface</label></p></li>
<li><p><label><input type="checkbox">Tests, tests, tests</label></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="llm-usage-disclosure">LLM Usage Disclosure<a class="anchor" aria-label="anchor" href="#llm-usage-disclosure"></a>
</h2>
<p>Code and documentation in this project have been generated with the assistance of the github Copilot LLM tools. While we have reviewed and edited the generated content, we acknowledge that LLM tools were used in the creation process and accordingly (since these models are trained on GPL code and other commons + proprietary software license is fake anyway) the code is released under GPL-3. So if you use this code in any way, you must comply with the GPL-3 license.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing wasmer</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Sounkou Mahamane Toure <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://extendr.github.io/extendr/extendr_api/" class="external-link"><img src="https://img.shields.io/badge/extendr-%5E0.8.1-276DC2" alt="extendr"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sounkou Mahamane Toure.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
